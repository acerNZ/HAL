set( CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_MODULE_PATH} )

set( BUILD_Gamepad true CACHE BOOL force)
if( BUILD_Gamepad )
		set( GSDK_CPP GSDK/EventDispatcher.cpp )
		set( GSDK_H GSDK/EventDispatcher.h GSDK/Gamepad.h )
		if(UNIX)
				if(APPLE)
						find_package( IOKit REQUIRED )
						include_directories( ${IOKit_INCLUDE_DIRS} )
						set(EXTRA_LIBS ${IOKit_LIBRARIES} )
#						find_package(CoreFoundation REQUIRED)
						find_library(COREFOUNDATION_LIBRARY CoreFoundation)
						set( GSDK_CPP ${GSDK_CPP} GSDK/Gamepad_macosx.cpp )
				else()
						set( GSDK_CPP ${GSDK_CPP} GSDK/Gamepad_linux.cpp )
				endif()
		endif()
		add_to_hal_sources( GamepadMultiDeviceDriver.h ${GSDK_H} GamepadMultiDeviceDriver.cpp GamepadMultiDeviceFactory.cpp ${GSDK_CPP} )
		add_to_hal_libraries(${COREFOUNDATION_LIBRARY} ${IOKit_LIBRARIES})
#		set( CMAKE_SHARED_LINKER_FLAGS ${CMAKE_SHARED_LINKER_FLAGS} "-framework CoreFoundation" "-framework IOKit")
#		SET(SINA_COVERAGE_LINK_FLAGS    "-framework CoreFoundation")
#		SET( CMAKE_SHARED_LINKER_FLAGS  "${CMAKE_SHARED_LINKER_FLAGS} ${SINA_COVERAGE_LINK_FLAGS}" )
endif()
